--
-- Script was generated by Devart dbForge Studio 2019 for MySQL, Version 8.1.22.0
-- Product home page: http://www.devart.com/dbforge/mysql/studio
-- Script date 6/20/2019 5:24:49 PM
-- Server version: 5.5.5-10.1.38-MariaDB
-- Client version: 4.1
--

-- 
-- Disable foreign keys
-- 
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;

-- 
-- Set SQL mode
-- 
/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;

-- 
-- Set character set the client will use to send SQL statements to the server
--
SET NAMES 'utf8';

--
-- Set default database
--
USE theluxspa;

--
-- Drop table `controllers`
--
DROP TABLE IF EXISTS controllers;

--
-- Drop table `permissions`
--
DROP TABLE IF EXISTS permissions;

--
-- Drop table `permission_roles`
--
DROP TABLE IF EXISTS permission_roles;

--
-- Drop table `roles`
--
DROP TABLE IF EXISTS roles;

--
-- Drop table `roles_users`
--
DROP TABLE IF EXISTS roles_users;

--
-- Drop table `users`
--
DROP TABLE IF EXISTS users;

--
-- Drop table `service_order_detail`
--
DROP TABLE IF EXISTS service_order_detail;

--
-- Drop table `rooms`
--
DROP TABLE IF EXISTS rooms;

--
-- Drop table `worker_services`
--
DROP TABLE IF EXISTS worker_services;

--
-- Drop table `services`
--
DROP TABLE IF EXISTS services;

--
-- Drop table `worker_offday`
--
DROP TABLE IF EXISTS worker_offday;

--
-- Drop table `workers`
--
DROP TABLE IF EXISTS workers;

--
-- Drop table `service_orders`
--
DROP TABLE IF EXISTS service_orders;

--
-- Drop table `invoices`
--
DROP TABLE IF EXISTS invoices;

--
-- Set default database
--
USE theluxspa;

--
-- Create table `invoices`
--
CREATE TABLE invoices (
  id int(11) NOT NULL AUTO_INCREMENT,
  name varchar(50) DEFAULT NULL,
  email varchar(50) DEFAULT NULL,
  phone varchar(255) DEFAULT NULL,
  voucher_number varchar(255) DEFAULT NULL,
  status enum ('pending_payment', 'paid_off', 'cancel_order', 'refund') DEFAULT 'pending_payment',
  method enum ('online', 'offline') DEFAULT 'online',
  expiry datetime DEFAULT '0000-00-00 00:00:00',
  created_at datetime DEFAULT NULL,
  updated_at datetime DEFAULT NULL,
  PRIMARY KEY (id)
)
ENGINE = INNODB,
AUTO_INCREMENT = 2,
CHARACTER SET latin1,
COLLATE latin1_swedish_ci;

--
-- Create index `voucher_number` on table `invoices`
--
ALTER TABLE invoices
ADD UNIQUE INDEX voucher_number (voucher_number);

--
-- Create table `service_orders`
--
CREATE TABLE service_orders (
  id int(11) NOT NULL AUTO_INCREMENT,
  invoice_id int(11) DEFAULT NULL,
  name varchar(50) DEFAULT NULL,
  email varchar(50) DEFAULT NULL,
  phone varchar(50) DEFAULT NULL,
  created_at datetime DEFAULT NULL,
  PRIMARY KEY (id)
)
ENGINE = INNODB,
AUTO_INCREMENT = 2,
CHARACTER SET latin1,
COLLATE latin1_swedish_ci;

--
-- Create foreign key
--
ALTER TABLE service_orders
ADD CONSTRAINT FK_service_order_invoice_id FOREIGN KEY (invoice_id)
REFERENCES invoices (id) ON DELETE NO ACTION;

--
-- Create table `workers`
--
CREATE TABLE workers (
  id int(11) NOT NULL AUTO_INCREMENT,
  name varchar(50) NOT NULL,
  gender enum ('L', 'P') DEFAULT NULL,
  created_at datetime DEFAULT NULL,
  updated_at datetime DEFAULT NULL,
  PRIMARY KEY (id)
)
ENGINE = INNODB,
AUTO_INCREMENT = 11,
AVG_ROW_LENGTH = 1638,
CHARACTER SET latin1,
COLLATE latin1_swedish_ci;

--
-- Create table `worker_offday`
--
CREATE TABLE worker_offday (
  worker_id int(11) DEFAULT NULL,
  date date DEFAULT NULL
)
ENGINE = INNODB,
CHARACTER SET latin1,
COLLATE latin1_swedish_ci;

--
-- Create foreign key
--
ALTER TABLE worker_offday
ADD CONSTRAINT FK_worker_offday_worker_id FOREIGN KEY (worker_id)
REFERENCES workers (id) ON DELETE NO ACTION ON UPDATE SET NULL;

--
-- Create table `services`
--
CREATE TABLE services (
  id int(11) NOT NULL AUTO_INCREMENT,
  name varchar(50) NOT NULL,
  description varchar(255) DEFAULT NULL,
  duration varchar(255) NOT NULL DEFAULT '60',
  price decimal(19, 2) DEFAULT 100000.00,
  created_at datetime DEFAULT NULL,
  updated_at datetime DEFAULT NULL,
  PRIMARY KEY (id)
)
ENGINE = INNODB,
AUTO_INCREMENT = 13,
AVG_ROW_LENGTH = 1489,
CHARACTER SET latin1,
COLLATE latin1_swedish_ci;

--
-- Create index `name` on table `services`
--
ALTER TABLE services
ADD UNIQUE INDEX name (name);

--
-- Create table `worker_services`
--
CREATE TABLE worker_services (
  worker_id int(11) DEFAULT NULL,
  service_id int(11) DEFAULT NULL
)
ENGINE = INNODB,
AVG_ROW_LENGTH = 420,
CHARACTER SET latin1,
COLLATE latin1_swedish_ci;

--
-- Create foreign key
--
ALTER TABLE worker_services
ADD CONSTRAINT FK_worker_services_service_id FOREIGN KEY (service_id)
REFERENCES services (id) ON DELETE NO ACTION;

--
-- Create foreign key
--
ALTER TABLE worker_services
ADD CONSTRAINT FK_worker_services_worker_id FOREIGN KEY (worker_id)
REFERENCES workers (id) ON DELETE NO ACTION;

--
-- Create table `rooms`
--
CREATE TABLE rooms (
  id int(11) NOT NULL AUTO_INCREMENT,
  name varchar(50) DEFAULT NULL,
  description varchar(255) DEFAULT NULL,
  status enum ('available', 'not_available') DEFAULT 'available',
  created_at datetime DEFAULT NULL,
  update_at datetime DEFAULT NULL,
  PRIMARY KEY (id)
)
ENGINE = INNODB,
AUTO_INCREMENT = 5,
AVG_ROW_LENGTH = 8192,
CHARACTER SET latin1,
COLLATE latin1_swedish_ci;

--
-- Create table `service_order_detail`
--
CREATE TABLE service_order_detail (
  name varchar(50) DEFAULT NULL,
  order_id int(11) DEFAULT NULL,
  service_id int(11) DEFAULT NULL,
  worker_id int(11) DEFAULT NULL,
  room_id int(11) DEFAULT NULL,
  duration int(11) DEFAULT NULL,
  date date DEFAULT NULL,
  time time DEFAULT NULL,
  total int(15) DEFAULT NULL,
  code varchar(255) DEFAULT NULL,
  status enum ('pending_payment', 'await', 'on_progress', 'done', 'canceled', 'refund', 'replacement') DEFAULT 'pending_payment'
)
ENGINE = INNODB,
AVG_ROW_LENGTH = 16384,
CHARACTER SET latin1,
COLLATE latin1_swedish_ci;

--
-- Create foreign key
--
ALTER TABLE service_order_detail
ADD CONSTRAINT FK_service_order_detail_order_id FOREIGN KEY (order_id)
REFERENCES service_orders (id) ON DELETE NO ACTION;

--
-- Create foreign key
--
ALTER TABLE service_order_detail
ADD CONSTRAINT FK_service_order_detail_room_id FOREIGN KEY (room_id)
REFERENCES rooms (id) ON DELETE NO ACTION;

--
-- Create foreign key
--
ALTER TABLE service_order_detail
ADD CONSTRAINT FK_service_order_detail_service_id FOREIGN KEY (service_id)
REFERENCES services (id) ON DELETE NO ACTION;

--
-- Create foreign key
--
ALTER TABLE service_order_detail
ADD CONSTRAINT FK_service_order_detail_worker_id FOREIGN KEY (worker_id)
REFERENCES workers (id) ON DELETE NO ACTION;

--
-- Create table `users`
--
CREATE TABLE users (
  id int(11) NOT NULL AUTO_INCREMENT,
  name varchar(255) DEFAULT NULL,
  username varchar(100) DEFAULT NULL,
  password varchar(255) DEFAULT NULL,
  code varchar(6) DEFAULT NULL,
  status tinyint(1) NOT NULL DEFAULT 1,
  created_at timestamp NULL DEFAULT NULL,
  updated_at timestamp NULL DEFAULT NULL,
  deleted_at timestamp NULL DEFAULT NULL,
  id_pegawai int(11) DEFAULT NULL,
  PRIMARY KEY (id)
)
ENGINE = INNODB,
AUTO_INCREMENT = 3,
AVG_ROW_LENGTH = 8192,
CHARACTER SET latin1,
COLLATE latin1_swedish_ci;

--
-- Create table `roles_users`
--
CREATE TABLE roles_users (
  user_id int(11) NOT NULL,
  role_id int(11) NOT NULL,
  PRIMARY KEY (user_id, role_id)
)
ENGINE = INNODB,
AVG_ROW_LENGTH = 16384,
CHARACTER SET latin1,
COLLATE latin1_swedish_ci;

--
-- Create table `roles`
--
CREATE TABLE roles (
  id smallint(5) UNSIGNED NOT NULL AUTO_INCREMENT,
  name varchar(200) NOT NULL,
  display_name varchar(30) DEFAULT NULL,
  description varchar(500) DEFAULT NULL,
  status tinyint(1) DEFAULT 1,
  created_at timestamp NULL DEFAULT NULL,
  updated_at timestamp NULL DEFAULT NULL,
  deleted_at timestamp NULL DEFAULT NULL,
  PRIMARY KEY (id)
)
ENGINE = INNODB,
AUTO_INCREMENT = 2,
AVG_ROW_LENGTH = 8192,
CHARACTER SET latin1,
COLLATE latin1_swedish_ci,
DELAY_KEY_WRITE = 1,
ROW_FORMAT = DYNAMIC;

--
-- Create index `UK_user_roles_role_Name` on table `roles`
--
ALTER TABLE roles
ADD UNIQUE INDEX UK_user_roles_role_Name (name);

--
-- Create table `permission_roles`
--
CREATE TABLE permission_roles (
  role_id int(11) NOT NULL,
  permission_id int(11) NOT NULL,
  PRIMARY KEY (role_id, permission_id)
)
ENGINE = INNODB,
AVG_ROW_LENGTH = 1820,
CHARACTER SET latin1,
COLLATE latin1_swedish_ci;

--
-- Create table `permissions`
--
CREATE TABLE permissions (
  id int(11) NOT NULL AUTO_INCREMENT,
  name varchar(100) DEFAULT NULL,
  display_name varchar(100) DEFAULT NULL,
  description tinytext DEFAULT NULL,
  status tinyint(1) DEFAULT 1,
  created_at timestamp NULL DEFAULT NULL,
  updated_at timestamp NULL DEFAULT NULL,
  deleted_at timestamp NULL DEFAULT NULL,
  PRIMARY KEY (id)
)
ENGINE = INNODB,
AUTO_INCREMENT = 15,
AVG_ROW_LENGTH = 1820,
CHARACTER SET latin1,
COLLATE latin1_swedish_ci;

--
-- Create index `name` on table `permissions`
--
ALTER TABLE permissions
ADD UNIQUE INDEX name (name);

--
-- Create table `controllers`
--
CREATE TABLE controllers (
  id int(11) NOT NULL AUTO_INCREMENT,
  header int(11) NOT NULL DEFAULT 0,
  name varchar(50) NOT NULL,
  description varchar(244) NOT NULL,
  class varchar(255) NOT NULL,
  method varchar(255) NOT NULL,
  uri varchar(255) NOT NULL,
  has_view enum ('0', '1') NOT NULL,
  icon varchar(255) DEFAULT NULL,
  sidebar enum ('0', '1') NOT NULL,
  menu_order int(11) DEFAULT NULL,
  PRIMARY KEY (id)
)
ENGINE = INNODB,
AUTO_INCREMENT = 22,
AVG_ROW_LENGTH = 1170,
CHARACTER SET latin1,
COLLATE latin1_swedish_ci;

-- 
-- Dumping data for table invoices
--
INSERT INTO invoices VALUES
(1, 'Donny', 'donny@mail.com', '0812', 'LUX-ORD20190601', 'pending_payment', 'online', '2019-06-21 00:00:00', '2019-06-11 00:00:00', NULL);

-- 
-- Dumping data for table workers
--
INSERT INTO workers VALUES
(1, 'Tonny Stark', 'L', '2019-06-10 00:00:00', NULL),
(2, 'Jake Olsen', 'L', '2019-06-10 00:00:00', NULL),
(3, 'Hank', 'L', '2019-06-10 00:00:00', NULL),
(4, 'Janet van Dyne', 'P', '2019-06-10 00:00:00', NULL),
(5, 'Dr. Robert Bruce Banner', 'L', '2019-06-10 00:00:00', NULL),
(6, 'Steve Rogers', 'L', '2019-06-10 00:00:00', NULL),
(7, 'Clinton Francis Barton', 'L', '2019-06-10 00:00:00', NULL),
(8, 'Wanda Maximoff', 'P', '2019-06-10 00:00:00', NULL),
(9, 'Natasha Alianovna Romanoff', 'P', '2019-06-10 00:00:00', NULL),
(10, 'Carol Susan Jane Danvers', 'P', '2019-06-10 00:00:00', NULL);

-- 
-- Dumping data for table service_orders
--
INSERT INTO service_orders VALUES
(1, 1, 'Donny', 'donny@mail.com', '0812', '2019-06-11 00:00:00');

-- 
-- Dumping data for table services
--
INSERT INTO services VALUES
(2, 'The Lux Refleksi', NULL, '1,3', 100000.00, '2019-06-10 09:09:44', NULL),
(3, 'Luxury Aromatherapy Refleksi', NULL, '1,3', 100000.00, '2019-06-10 09:09:44', NULL),
(4, 'Head Massage', NULL, '1,2', 100000.00, '2019-06-10 09:09:44', NULL),
(5, 'Face Massage', NULL, '1,2', 100000.00, '2019-06-10 09:09:44', NULL),
(6, 'Lux Body Massage', NULL, '1,3', 100000.00, '2019-06-10 09:09:44', NULL),
(7, 'Body Scrubs', NULL, '1,3', 100000.00, '2019-06-10 09:09:44', NULL),
(8, 'Back Therapy', NULL, '1,2,3', 100000.00, '2019-06-10 09:09:44', NULL),
(9, 'Spa Massage', NULL, '1,2,3,4', 100000.00, '2019-06-10 09:09:44', NULL),
(10, 'Ear Candling', NULL, '0,1', 100000.00, '2019-06-10 09:09:44', NULL),
(11, 'Cupping', NULL, '1,2,3', 100000.00, '2019-06-10 09:09:44', NULL),
(12, 'Coin Massage', NULL, '1', 100000.00, '2019-06-10 09:09:44', NULL);

-- 
-- Dumping data for table rooms
--
INSERT INTO rooms VALUES
(1, 'Kamar 1', NULL, 'available', '2019-06-11 00:00:00', NULL),
(2, 'Kamar 2', NULL, 'available', '2019-06-11 00:00:00', NULL),
(3, 'Kamar 3', NULL, 'available', '2019-06-11 00:00:00', NULL),
(4, 'Kamar 4', NULL, 'available', '2019-06-19 00:00:00', NULL);

-- 
-- Dumping data for table worker_services
--
INSERT INTO worker_services VALUES
(1, 7),
(1, 12),
(1, 10),
(1, 5),
(1, 6),
(1, 2),
(2, 12),
(2, 11),
(2, 5),
(2, 4),
(2, 6),
(3, 8),
(3, 7),
(3, 5),
(3, 3),
(3, 9),
(4, 12),
(4, 10),
(4, 5),
(4, 3),
(4, 9),
(5, 8),
(5, 10),
(5, 2),
(6, 12),
(6, 5),
(6, 4),
(6, 3),
(7, 7),
(7, 12),
(7, 4),
(7, 6),
(8, 5),
(8, 6),
(8, 3),
(8, 9),
(9, 8),
(9, 7),
(9, 3),
(9, 9),
(10, 8),
(10, 6),
(10, 3);

-- 
-- Dumping data for table worker_offday
--
INSERT INTO worker_offday VALUES
(2, '2019-06-21');

-- 
-- Dumping data for table users
--
INSERT INTO users VALUES
(1, 'admin', 'admin', '$2y$10$ZMQOPfEVLtMrp51j9i3JBeKeOrOXEbvK/XZ2NYx48QqdM766dJBB.', '', 1, NULL, NULL, NULL, NULL),
(2, 'Tio Agustian', 'tioagustian', '$2y$10$tGqphHM7ujHEMS8DX0HTQeKIskl0H6IguOiNEtpWyuRwM4NUy5YqW', NULL, 1, NULL, '2019-04-29 06:33:50', NULL, 14);

-- 
-- Dumping data for table service_order_detail
--
INSERT INTO service_order_detail VALUES
('Donny', 1, 4, 4, 2, 60, '2019-06-20', '13:00:00', 100000, 'LUX-04040260201906201000', 'pending_payment');

-- 
-- Dumping data for table roles_users
--
INSERT INTO roles_users VALUES
(1, 1);

-- 
-- Dumping data for table roles
--
INSERT INTO roles VALUES
(1, 'admin', 'admin', 'admin', 1, NULL, '2019-06-11 07:24:14', NULL);

-- 
-- Dumping data for table permission_roles
--
INSERT INTO permission_roles VALUES
(1, 2),
(1, 3),
(1, 4),
(1, 5),
(1, 7),
(1, 8),
(1, 9),
(1, 10),
(1, 11),
(1, 12),
(1, 13),
(1, 14);

-- 
-- Dumping data for table permissions
--
INSERT INTO permissions VALUES
(2, 'index-pengaturan', 'Pengaturan', 'Administrasi web', 1, NULL, '2019-04-16 11:39:19', NULL),
(3, 'permissions-pengaturan', 'Permissions', 'Kelola permissions', 1, NULL, '2019-04-16 06:04:38', NULL),
(4, 'controllers-pengaturan', 'Controllers', 'Pengaturan contollers', 1, NULL, '2019-04-16 06:03:44', NULL),
(5, 'users-pengaturan', 'Users', 'Kelola users', 1, '2019-04-09 11:17:56', '2019-04-16 06:04:02', NULL),
(7, 'roles-pengaturan', 'Roles', 'Akses pengaturan roles', 1, '2019-04-09 11:53:32', '2019-04-16 06:06:19', NULL),
(8, 'index-dashboard', 'Beranda', 'Dashboard', 1, '2019-04-09 12:28:18', '2019-04-15 10:59:02', NULL),
(9, 'index-layanan', 'Layanan', 'Pengaturan Layanan', 1, '2019-06-10 09:18:53', NULL, NULL),
(10, 'crud-layanan', 'CRUD', 'CRUD forservices table', 1, '2019-06-10 09:33:51', NULL, NULL),
(11, 'index-terapis', 'Terapis', 'Data terapis', 1, '2019-06-10 10:05:29', NULL, NULL),
(12, 'crud-terapis', 'Terapis CRUD', 'CRUD for worker table', 1, '2019-06-10 10:06:17', NULL, NULL),
(13, 'index-pesanan', 'Pesanan', 'Data pesanan', 1, '2019-06-11 06:19:16', NULL, NULL),
(14, 'getDataPesanan-pesanan', 'List pesanan', 'Data pesanan, digunakan hanya untuk ajax request', 1, '2019-06-11 07:24:03', NULL, NULL);

-- 
-- Dumping data for table controllers
--
INSERT INTO controllers VALUES
(1, 0, 'Beranda', 'Dashboard', 'dashboard', 'index', 'admin/dashboard', '1', 'feather icon-home', '1', 0),
(6, 0, 'Pengaturan', 'Administrasi web', 'pengaturan', 'index', 'admin/pengaturan', '1', 'feather icon-settings', '1', 4),
(7, 6, 'Controllers', 'Pengaturan contollers', 'pengaturan', 'controllers', 'admin/pengaturan/controllers', '1', 'feather icon-server', '1', 0),
(8, 0, 'Login', '', 'login', 'index', 'admin/login', '1', NULL, '0', 0),
(9, 0, 'Logout', '', 'login', 'logout', 'admin/logout', '1', 'feather icon-log-out', '1', 0),
(12, 6, 'Users', 'Kelola users', 'pengaturan', 'users', 'admin/pengaturan/users', '1', 'feather icon-users', '1', 1),
(13, 6, 'Permissions', 'Kelola permissions', 'pengaturan', 'permissions', 'admin/pengaturan/permissions', '1', 'feather icon-shield', '1', 3),
(15, 6, 'Roles', 'Akses pengaturan roles', 'pengaturan', 'roles', 'admin/pengaturan/roles', '1', 'feather icon-at-sign', '1', 2),
(16, 0, 'Layanan', 'Pengaturan Layanan', 'layanan', 'index', 'admin/layanan', '1', 'feather icon-list', '1', 2),
(17, 16, 'CRUD', 'CRUD fo rservices table', 'layanan', 'crud', 'admin/layanan/crud', '0', 'feather icon-box', '0', NULL),
(18, 0, 'Terapis', 'Data terapis', 'terapis', 'index', 'admin/terapis', '1', 'feather icon-users', '1', 1),
(19, 18, 'Terapis CRUD', 'CRUD for worker table', 'terapis', 'crud', 'admin/terapis/crud', '0', NULL, '0', NULL),
(20, 0, 'Pesanan', 'Data pesanan', 'pesanan', 'index', 'admin/pesanan', '1', 'feather icon-shopping-cart', '1', 3),
(21, 20, 'List pesanan', 'Data pesanan, digunakan hanya untuk ajax request', 'pesanan', 'getDataPesanan', 'admin/pesanan/getDataPesanan', '0', NULL, '0', NULL);

-- 
-- Restore previous SQL mode
-- 
/*!40101 SET SQL_MODE=@OLD_SQL_MODE */;

-- 
-- Enable foreign keys
-- 
/*!40014 SET FOREIGN_KEY_CHECKS = @OLD_FOREIGN_KEY_CHECKS */;